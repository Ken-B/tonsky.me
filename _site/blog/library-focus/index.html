<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns:og="http://opengraphprotocol.org/schema/">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
  
    <meta name="viewport" content="width=640" />
  
  <meta name="theme-color" content="#FDDB29">
  <link href="/i/favicon.png" rel="icon" sizes="32x32">

  <link href='/style.css?v=20201203' rel='stylesheet' type='text/css' />
  <title>Library focus @ tonsky.me</title>

  <link href="/blog/atom.xml" rel="alternate" title="Nikita Prokopov’s blog" type="application/atom+xml" />

  <meta name="author" content="Nikita Prokopov" />
  
  <meta property="og:title" content="Library focus" />
  <meta property="og:url" content="https://tonsky.me/blog/library-focus/" />
  
    <meta property="og:type" content="article" />

    <meta property="article:published_time" content='2018-07-11' />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Library focus" />
  

  
    <meta property="og:description" content="Why you shouldn’t write libraries as a part of a bigger software project" />
    <meta name="twitter:description" content="Why you shouldn’t write libraries as a part of a bigger software project" />
  

  <meta property="og:site_name" content="tonsky.me" />
  <meta property="article:author" content="https://www.facebook.com/nikitonsky" />
  <meta property="profile:first_name" content="Nikita" />
  <meta property="profile:last_name" content="Prokopov" />
  <meta property="profile:username" content="tonsky" />
  <meta property="profile:gender" content="male" />

  <meta name="twitter:creator" content="@nikitonsky" />
</head>
<body>
<div class="page ">

<ul class=menu>
  <li><a class="menu__item menu__item_inside" href="/">Blog</a></li>
  <li><a class="menu__item" href="/talks/">Talks</a></li>
  <li><a class="menu__item" href="/projects/">Projects</a></li>
  <li><a class="menu__item" href="/design/">Logos</a></li>
  <!-- <li><a class="menu__item" href="/consulting/">UX&nbsp;Consulting</a></li> -->
  <li><a class="menu__item" href="/patrons/">Patrons</a></li>
  <div class="spacer"></div>
  <div class="dark_mode"></div>
</ul>


<article class="post">
  <h1 class="title">Library focus</h1>

  <p></p>

  <p>Software projects rely on libraries heavily. Usually it’s pretty simple: you have a need, you pick a library, you integrate it and get results. Most of the time it’s advantegeous—economically—because it’s faster than rolling your own implementation.</p>

<p>Clojure, though, faces an unique challenge here: many problems that have been addressed by libraries can be trivially solved in your own code too, and it can be done in a time that is comparable to the time that’ll take you to figure out a library. I’m not exaggerating—it’s really <em>that simple</em>.</p>

<p>Sure, there are libraries that do heavy lifting—stuff like DataScript or Instaparse, those will take you more than a day to write. But a good half of all libraries, or even more, <em>can</em> be reproduced in day’s time. Maybe not for all use cases, but for all <em>your cases</em> at least. If you think of it, all clojure.test does is just asserting for you, Component runs functions that you give it to run, compojure/bidi/other routers do pretty basic regexp matching on strings, etc.</p>

<p>So, if you <em>can</em> solve your problems by writing your own code, and there’re no economic reasons not to, why shouldn’t you? You’ll get more freedom and better fit for your unique problems, right?</p>

<p>Well, you shouldn’t do it because you’re badly positioned to do so. Libraries and products need different focus. If you’re writing a production project, <em>there’re no powers in play that’ll stop you from compromising greater but further good to the immediate needs.</em> You’ll inevitably end up with incoherent, incomplete home-grown “library” that’s pain to use (as the rest of your code is) and is tightly coupled to your project.</p>

<p>Code is probably the simplest to isolate, but the assumptions, the features you decided to focus on will create the unfortunate coupling and compromised vision. Sometimes you’ll skip on crucial parts because there’s no time, sometimes you’ll focus on parts that shouldn’t be solved in there (but were very convenient—and quick—to solve there nevertheless). And of course you’ll never add stuff in advance, so it’ll never be finished, not really, and will change all the time.</p>

<p>So no, you can’t build a project and publish parts of it open-source while at it, not in a valuable way. It’s either one or the other.</p>

<p>I’m only writing about this because the difference’s so subtle it’s almost magical: the very same people, perfectly capable software engineers, when put in a bigger project context, almost physically can’t produce anything comparable to a library code in terms of clarity, isolation and reusability.</p>

<p>So yeah, choosing a library over rolling your own implementation has a benefit: a benefit of author’s focus that’s different from your immediate needs.</p>

<p>And no, don’t plan a project’s architecture on a library you plan to write first that’ll make rest of the development easier. That’ll never fly.</p>


  <p class=footer>
    <span>July 11, 2018</span>
    

    
  </p>

  <script>
    document.querySelectorAll(".hoverable").forEach(function (e) {
        e.onclick = function() { e.classList.toggle("clicked"); }
    });
  </script>

  
  <div class="about">
    <div class="about_photo"></div>
    <div class="about_inner">
      <p>Hi!</p>
      <p>I’m Nikita. Here I write about programming and UI design <a style="margin-left: 5px" class="btn-subscribe" href="/blog/how-to-subscribe/" target="_blank"><svg viewBox="0 0 800 800"><path d="M493 652H392c0-134-111-244-244-244V307c189 0 345 156 345 345zm71 0c0-228-188-416-416-416V132c285 0 520 235 520 520z"/><circle cx="219" cy="581" r="71"/></svg> Subscribe</a></p>
      <p>I also create open-source stuff: Fira Code, AnyBar, DataScript and Rum. If you like what I do and want to get early access to my articles (along with other benefits), you should <a href="https://patreon.com/tonsky" target="_blank">support me on Patreon</a>.</p>
    </div>
  </div>
  

</article>


<div class="preload"></div>

</div>

<script>
  function updateFlashlight(e) {
    var style = document.body.style;
    style.backgroundPositionX = e.pageX - 250 + "px";
    style.backgroundPositionY = e.pageY - 250 + "px";
  }

  document.querySelector(".dark_mode").onclick = function(e) {
    var body = document.body;
    body.classList.toggle("dark");
    if (body.classList.contains("dark")) {
      updateFlashlight(e);
      ["mousemove", "touchstart", "touchmove", "touchend"].forEach(function(s) {
        document.documentElement.addEventListener(s, updateFlashlight, false);
      });
    } else {
      ["mousemove", "touchstart", "touchmove", "touchend"].forEach(function(s) {
        document.documentElement.removeEventListener(s, updateFlashlight, false);
      });
    }
  }
</script>
